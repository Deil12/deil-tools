#spring.cloud.nacos.discovery.username=tang_bgTest
#spring.cloud.nacos.discovery.password=ENC(FZm0m0aiJji7PY6qLQMU6klIe2fkVEQmhE+fkY72VTE=)
#spring.cloud.nacos.discovery.server-addr=10.79.5.89:8848,10.79.5.90:8848,10.79.5.91:8848
#spring.cloud.nacos.discovery.namespace=backgroundService-dev
spring.cloud.nacos.discovery.username=deil
spring.cloud.nacos.discovery.password=ENC(b2+4vwzFdn73deS7wVkPsT5vjeSuSCy8)
spring.cloud.nacos.discovery.server-addr=localhost:8848
spring.cloud.nacos.discovery.namespace=deil-dev
spring.cloud.nacos.config.username=${spring.cloud.nacos.discovery.username}
spring.cloud.nacos.config.password=${spring.cloud.nacos.discovery.password}
spring.cloud.nacos.config.server-addr=${spring.cloud.nacos.discovery.server-addr}
spring.cloud.nacos.config.namespace=${spring.cloud.nacos.discovery.namespace}
spring.cloud.nacos.config.enable-remote-sync-config=true

################################################## 同 步 更 新 本 配 置 ##################################################

server.port=8089

#第三方
deil.gateway.externalAppId=externalTest
deil.gateway.externalApi=/externalTest1/*,/externalTest2/*
deil.gateway.thirdPartyAppId=thirdTest
deil.gateway.thirdPartyPath=/thirdTest/url1,/thirdTest/url2

deil.auth.validtime=3000000
deil.auth.ignoreApi[0]=/**/HealthCheck/Check
deil.auth.ignoreApi[1]=/**/HealthCheck/F5Check
deil.auth.ignoreApi[2]=/**/v3/api-docs
#1：内部账号, 外部账号
deil.auth.account[0].appid=test
deil.auth.account[0].appSecret=ENC(h2AZ1+mZZf+K37T+ujqnirwm0gmRpbvq)
deil.auth.account[0].accountType=1
deil.auth.account[0].whiteList[0]=127.0.0.1
deil.auth.account[0].blackList[0]=127.0.0.0
deil.auth.account[1].appid=open
deil.auth.account[1].appSecret=ENC(aRwZhEqfCG9BK93TYLGTbIk3hn7NUnhI)
deil.auth.account[1].accountType=2

deil.log.ftp.enable=true
deil.log.ftp.logFilePath=/serviceLog/
deil.log.ftp.logIp=127.0.0.1
deil.log.ftp.hostIp=10.79.10.128
deil.log.ftp.port=222
deil.log.ftp.userName=tang_user
deil.log.ftp.password=ENC(ChR7coUCc5zsZOSfUTJ1ECWpo0m2w4U4)
deil.log.ftp.path=/serviceLog/

#网关配置
spring.cloud.gateway.discovery.locator.enabled=true
spring.cloud.gateway.routes[0].id=open_api_0
spring.cloud.gateway.routes[0].uri=http://localhost:8090
spring.cloud.gateway.routes[0].predicates[0]=Path=/testGateway/**
spring.cloud.gateway.routes[0].filters[0]=StripPrefix=1
spring.cloud.gateway.routes[0].filters[1]=AuthRequestHeadFilterFactory
spring.cloud.gateway.routes[0].filters[2].name=RequestRateLimiter
#使用ip进行限流
spring.cloud.gateway.routes[0].filters[2].args.key-resolver=#{@ipKeyResolver}
#令牌每秒填充速率
spring.cloud.gateway.routes[0].filters[2].args.redis-rate-limiter.replenishRate=60
#令牌桶大小
spring.cloud.gateway.routes[0].filters[2].args.redis-rate-limiter.burstCapacity=120

spring.cloud.gateway.routes[1].id=open_api_1
spring.cloud.gateway.routes[1].uri=lb://deil-demo
spring.cloud.gateway.routes[1].predicates[0]=Path=/demo-api/**
spring.cloud.gateway.routes[1].filters[0]=StripPrefix=1
spring.cloud.gateway.routes[1].filters[1]=AuthRequestHeadFilterFactory
spring.cloud.gateway.routes[1].filters[2].name=RequestRateLimiter
spring.cloud.gateway.routes[1].filters[2].args.key-resolver=#{@ipKeyResolver}
spring.cloud.gateway.routes[1].filters[2].args.redis-rate-limiter.replenishRate=60
spring.cloud.gateway.routes[1].filters[2].args.redis-rate-limiter.burstCapacity=120

spring.cloud.gateway.routes[2].id=open_api_2
spring.cloud.gateway.routes[2].uri=lb://deil-quartz
spring.cloud.gateway.routes[2].predicates[0]=Path=/quartz-api/**
spring.cloud.gateway.routes[2].filters[0]=StripPrefix=1
spring.cloud.gateway.routes[2].filters[1]=AuthRequestHeadFilterFactory
spring.cloud.gateway.routes[2].filters[2].name=RequestRateLimiter
spring.cloud.gateway.routes[2].filters[2].args.key-resolver=#{@ipKeyResolver}
spring.cloud.gateway.routes[2].filters[2].args.redis-rate-limiter.replenishRate=60
spring.cloud.gateway.routes[2].filters[2].args.redis-rate-limiter.burstCapacity=120

spring.redis.cluster.nodes=localhost:5379,localhost:5479,localhost:5579
spring.redis.password=ENC(2bnHWuOmw+groL6oPJzBCEY03tAzKAh8)
spring.redis.lettuce.pool.max-wait=1000ms